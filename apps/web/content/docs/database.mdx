---
title: Database Schema
description: SQLite database structure and models.
---


Budget App uses SQLite with better-sqlite3 for data persistence.

## Overview

The database file is stored at `budget.db` in the app root.

## Tables

### users

User accounts:

```sql
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  email TEXT UNIQUE NOT NULL,
  name TEXT NOT NULL,
  avatar TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
```

### categories

Transaction categories:

```sql
CREATE TABLE categories (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('income', 'expense')),
  icon TEXT NOT NULL,
  color TEXT NOT NULL,
  created_at TEXT DEFAULT (datetime('now'))
);
```

### transactions

Financial transactions:

```sql
CREATE TABLE transactions (
  id TEXT PRIMARY KEY,
  user_id INTEGER NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('income', 'expense')),
  amount REAL NOT NULL,
  currency TEXT NOT NULL DEFAULT 'INR',
  category TEXT NOT NULL,
  description TEXT,
  date TEXT NOT NULL,
  is_recurring INTEGER DEFAULT 0,
  recurring_id TEXT,
  tags TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (category) REFERENCES categories(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### budgets

Category budgets:

```sql
CREATE TABLE budgets (
  id TEXT PRIMARY KEY,
  user_id INTEGER NOT NULL,
  category TEXT NOT NULL,
  amount REAL NOT NULL,
  currency TEXT NOT NULL DEFAULT 'INR',
  period TEXT NOT NULL CHECK (period IN ('weekly', 'monthly', 'quarterly', 'yearly')),
  spent REAL DEFAULT 0,
  start_date TEXT NOT NULL,
  created_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (category) REFERENCES categories(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### goals

Savings goals:

```sql
CREATE TABLE goals (
  id TEXT PRIMARY KEY,
  user_id INTEGER NOT NULL,
  name TEXT NOT NULL,
  target_amount REAL NOT NULL,
  current_amount REAL DEFAULT 0,
  currency TEXT NOT NULL DEFAULT 'INR',
  deadline TEXT NOT NULL,
  category TEXT,
  icon TEXT NOT NULL,
  color TEXT NOT NULL,
  is_completed INTEGER DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (category) REFERENCES categories(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### reminders

Bill reminders:

```sql
CREATE TABLE reminders (
  id TEXT PRIMARY KEY,
  user_id INTEGER NOT NULL,
  title TEXT NOT NULL,
  amount REAL NOT NULL,
  currency TEXT NOT NULL DEFAULT 'INR',
  due_date TEXT NOT NULL,
  category TEXT NOT NULL,
  is_recurring INTEGER DEFAULT 0,
  frequency TEXT CHECK (frequency IN ('daily', 'weekly', 'biweekly', 'monthly', 'quarterly', 'yearly')),
  is_paid INTEGER DEFAULT 0,
  notify_before INTEGER DEFAULT 3,
  created_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (category) REFERENCES categories(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### recurring_transactions

Recurring transaction templates:

```sql
CREATE TABLE recurring_transactions (
  id TEXT PRIMARY KEY,
  user_id INTEGER NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('income', 'expense')),
  amount REAL NOT NULL,
  currency TEXT NOT NULL DEFAULT 'INR',
  category TEXT NOT NULL,
  description TEXT,
  frequency TEXT NOT NULL CHECK (frequency IN ('daily', 'weekly', 'biweekly', 'monthly', 'quarterly', 'yearly')),
  start_date TEXT NOT NULL,
  end_date TEXT,
  next_due_date TEXT NOT NULL,
  is_active INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (category) REFERENCES categories(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### settings

App settings (single row):

```sql
CREATE TABLE settings (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  default_currency TEXT NOT NULL DEFAULT 'INR',
  theme TEXT NOT NULL DEFAULT 'system' CHECK (theme IN ('light', 'dark', 'system')),
  date_format TEXT NOT NULL DEFAULT 'MMM dd, yyyy',
  language TEXT NOT NULL DEFAULT 'en',
  notifications_enabled INTEGER DEFAULT 1
);
```

### currencies

Supported currencies:

```sql
CREATE TABLE currencies (
  code TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  symbol TEXT NOT NULL,
  rate REAL NOT NULL DEFAULT 1
);
```

### subscriptions

User subscriptions:

```sql
CREATE TABLE subscriptions (
  id TEXT PRIMARY KEY,
  user_id INTEGER NOT NULL,
  plan_id TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'cancelled', 'expired', 'past_due', 'trialing')),
  current_period_start TEXT NOT NULL,
  current_period_end TEXT,
  cancel_at_period_end INTEGER DEFAULT 0,
  trial_end TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## Entity Relationship Diagram

```
┌──────────┐       ┌──────────────┐
│  users   │───────│ transactions │
└──────────┘       └──────────────┘
     │                    │
     │              ┌─────┴─────┐
     │              │           │
     │         ┌────▼───┐  ┌────▼────┐
     │         │categories│ │recurring │
     │         └─────────┘  └─────────┘
     │
     ├─────────┬─────────┬──────────┐
     │         │         │          │
┌────▼───┐ ┌───▼───┐ ┌───▼────┐ ┌───▼────────┐
│ budgets│ │ goals │ │reminders│ │subscriptions│
└────────┘ └───────┘ └────────┘ └────────────┘
```

## Default Data

### Default Categories

20 categories (6 income, 14 expense) are seeded on first run.

### Default Currencies

10 currencies with exchange rates:

- USD, EUR, GBP, JPY, CAD
- AUD, CHF, CNY, INR, MXN

### Demo Data

Sample data for testing:

- 1 demo user
- 25+ transactions
- 6 budgets
- 5 goals
- 7 reminders
- 5 recurring transactions

## Database Connection

```typescript
import Database from "better-sqlite3";

const db = new Database("budget.db");
db.pragma("journal_mode = WAL");
```

## WAL Mode

Write-Ahead Logging is enabled for:

- Better concurrent read performance
- Faster writes
- Automatic recovery

Files created:

- `budget.db` - Main database
- `budget.db-wal` - Write-ahead log
- `budget.db-shm` - Shared memory
